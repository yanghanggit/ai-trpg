from typing import Dict, List, final
from pydantic import BaseModel
from .session_message import SessionMessage
from .dungeon import Dungeon
from .serialization import EntitySerialization

################################################################################################################
################################################################################################################
################################################################################################################


@final
class RootResponse(BaseModel):
    service: str
    description: str
    version: str
    status: str
    timestamp: str
    endpoints: Dict[str, str]


################################################################################################################
################################################################################################################
################################################################################################################


@final
class LoginRequest(BaseModel):
    user_name: str
    game_name: str


@final
class LoginResponse(BaseModel):
    message: str


################################################################################################################
################################################################################################################
################################################################################################################


@final
class LogoutRequest(BaseModel):
    user_name: str
    game_name: str


@final
class LogoutResponse(BaseModel):
    message: str


################################################################################################################
################################################################################################################
################################################################################################################


@final
class StartRequest(BaseModel):
    user_name: str
    game_name: str
    actor_name: str


@final
class StartResponse(BaseModel):
    message: str


################################################################################################################
################################################################################################################
################################################################################################################


@final
class HomeTransDungeonRequest(BaseModel):
    user_name: str
    game_name: str


@final
class HomeTransDungeonResponse(BaseModel):
    message: str


################################################################################################################
################################################################################################################
################################################################################################################
@final
class DungeonTransHomeRequest(BaseModel):
    user_name: str
    game_name: str


@final
class DungeonTransHomeResponse(BaseModel):
    message: str


################################################################################################################
################################################################################################################
################################################################################################################


@final
class HomeGamePlayUserInput(BaseModel):
    tag: str
    data: Dict[str, str]


@final
class HomeGamePlayRequest(BaseModel):
    user_name: str
    game_name: str
    user_input: HomeGamePlayUserInput


@final
class HomeGamePlayResponse(BaseModel):
    client_messages: List[SessionMessage]


################################################################################################################
################################################################################################################
################################################################################################################


@final
class DungeonGamePlayUserInput(BaseModel):
    tag: str
    data: Dict[str, str]


@final
class DungeonGamePlayRequest(BaseModel):
    user_name: str
    game_name: str
    user_input: DungeonGamePlayUserInput


@final
class DungeonGamePlayResponse(BaseModel):
    client_messages: List[SessionMessage]


################################################################################################################
################################################################################################################
################################################################################################################


@final
class DungeonStateResponse(BaseModel):
    mapping: Dict[str, List[str]]
    dungeon: Dungeon


################################################################################################################
################################################################################################################
################################################################################################################


@final
class HomeStateResponse(BaseModel):
    mapping: Dict[str, List[str]]


################################################################################################################
################################################################################################################
################################################################################################################


@final
class ActorDetailsResponse(BaseModel):
    actor_entities_serialization: List[EntitySerialization]
    # agent_short_term_memories: List[AgentChatHistory]


################################################################################################################
################################################################################################################
################################################################################################################


@final
class SessionMessageResponse(BaseModel):
    session_messages: List[SessionMessage]
