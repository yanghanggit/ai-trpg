#!/usr/bin/env python3
"""
æ¸¸æˆæµæ°´çº¿ - å¼€å±€åˆå§‹åŒ–æ¨¡å—

è´Ÿè´£å¤„ç†æ¸¸æˆåœºæ™¯å’Œè§’è‰²çš„å¼€å±€åˆå§‹åŒ–ï¼ˆKickoffï¼‰æµç¨‹ã€‚
"""

from loguru import logger
from agent_utils import GameWorld
from ai_trpg.pgsql import (
    get_world_kickoff,
    set_world_kickoff,
)


########################################################################################################################
########################################################################################################################
########################################################################################################################
async def handle_kickoff(
    game_world: GameWorld,
) -> None:
    """å¤„ç†æ‰€æœ‰ä»£ç†çš„å¼€å±€åˆå§‹åŒ–"""

    if get_world_kickoff(game_world.world_name):
        logger.info("âš ï¸ æ¸¸æˆå·²å®Œæˆå¼€å±€åˆå§‹åŒ–ï¼Œè·³è¿‡é‡å¤æ‰§è¡Œ kickoff æµç¨‹")
        return

    logger.info("ğŸ® å¼€å§‹å¼€å±€åˆå§‹åŒ–æµç¨‹...")
    set_world_kickoff(game_world.world_name, True)
    logger.info("âœ… å¼€å±€åˆå§‹åŒ–æµç¨‹å®Œæˆ")
